api:
#automation:
#cloud:
counter:
dhcp:
diagnostics:
discovery:
#energy:
ffmpeg:
history:
input_boolean:
input_button:
input_datetime:
input_number:
input_select:
input_text:
logbook:
map:
media_source:
mobile_app:
my:
network:
notify:
person:
#script:
ssdp:
sun:
system_health:
#tag:
timer:
usb:
wake_on_lan:
webhook:
zeroconf:
zone:

frontend:
  themes: !include_dir_merge_named themes

homeassistant:
  name: "Home"
  latitude: !secret home_lat
  longitude: !secret home_lon
  elevation: 14
  unit_system: "metric"
  currency: "GBP"
  time_zone: "Europe/London"
  external_url: "https://hass.jimeagle.com"
  internal_url: "http://192.168.0.7:8123"
  auth_providers:
    - type: "trusted_networks"
      trusted_networks:
        - "192.168.0.8" # PC
        - "192.168.0.10" # Phone
    - type: "homeassistant"

http:
  use_x_forwarded_for: true
  trusted_proxies:
    - "192.168.0.7"
    - "::1"

tts:
  - platform: "google_translate"

mqtt:
  client_id: "hass"

spotify:
  client_id: !secret spotify_id
  client_secret: !secret spotify_secret

#camera:
#  - platform: onvif
#    host: !secret camera_host
#    name: 'driveway'
#    username: admin
#    password: !secret camera_pass

google_assistant:
  project_id: !secret assistant_project_id
  service_account: !include google_assistant_key.json
  report_state: true
  expose_by_default: false
  entity_config:

    # Shelly
    light.shellydimmer2_48551900035d:
      name: "Hallway Downstairs"
    light.shellydimmer2_485519002b72:
      name: "Office"
    light.shellydimmer2_4855190088ac:
      name: "Small Room"
    light.shellydimmer2_48551900b4e6:
      name: "Bathroom"
    light.shellydimmer2_48551900c175:
      name: "Bedroom"
    light.shellydimmer2_48551900c7e2:
      name: "Dining Room"
    light.shellydimmer2_48551900caca:
      name: "Hallway Upstairs"
    light.shellydimmer2_C45BBE572627:
      name: "Living Room"
    light.shellydimmer2_e89f6d8559a2:
      name: "Spare Room"
    light.shellydimmer2_c45bbe56f9ba:
      name: "Kitchen"

    # Hue
    light.spare_room_floor_light:
      name: "Floor Light"
    light.living_room_big_light:
      name: "Big Light"

    # Switches
    switch.work_alarms:
      name: "Work Alarms"
    switch.guest_mode:
      name: "Guest Mode"
    switch.nzbget_download:
      name: "Downloads"
    switch.pi_hole:
      name: "Pihole"
    switch.someone_home:
      name: "Someone Home"
    switch.washing_out:
      name: "Washing Out"

    # Wake On Lan
    switch.wake_pc:
      name: "PC"
    switch.wake_xbox:
      name: "XBOX"

    # Scenes
    scene.everything_off:
      name: "Bedtime"

button:
  - platform: "mqtt"
    name: "Heating - Off"
    unique_id: "all-heating-off-button"
    command_topic: "home/heating/all-off"
  - platform: "mqtt"
    name: "Heating - Schedule"
    unique_id: "all-heating-schedule-button"
    command_topic: "home/heating/all-schedule"

scene:
  - platform: "mqtt"
    name: "Everything Off"
    unique_id: "everything-off-scene"
    command_topic: "home/everything-off"
    payload_on: "ON"
    retain: false

light:
  - platform: "blink1_status"
  - platform: "group"
    name: "All Lights"
    entities:
      - "light.shellydimmer2_48551900035d" # Hallway Downstairs
      - "light.shellydimmer2_485519002b72" # Office
      - "light.shellydimmer2_4855190088ac" # Small Room
      - "light.shellydimmer2_48551900b4e6" # Bathroom
      - "light.shellydimmer2_48551900c175" # Bedroom
      - "light.shellydimmer2_48551900c7e2" # Dining Room
      - "light.shellydimmer2_48551900caca" # Hallway Upstairs
      - "light.shellydimmer2_C45BBE572627" # Living Room
      - "light.shellydimmer2_e89f6d8559a2" # Spare Room
      - "light.shellydimmer2_c45bbe56f9ba" # Kitchen
      - "light.spare_room_floor_light"
      - "light.living_room_big_light"
      - "light.bedroom_floor_light"
  - platform: "group"
    name: "Upstairs Lights"
    entities:
      - "light.shellydimmer2_485519002b72" # Office
      - "light.shellydimmer2_4855190088ac" # Small Room
      - "light.shellydimmer2_48551900b4e6" # Bathroom
      - "light.shellydimmer2_48551900c175" # Bedroom
      - "light.shellydimmer2_48551900caca" # Hallway Upstairs
      - "light.shellydimmer2_e89f6d8559a2" # Spare Room
      - "light.spare_room_floor_light"
      - "light.bedroom_floor_light"
  - platform: "group"
    name: "Downstairs Lights"
    entities:
      - "light.shellydimmer2_48551900035d" # Hallway Downstairs
      - "light.shellydimmer2_48551900c7e2" # Dining Room
      - "light.shellydimmer2_C45BBE572627" # Living Room
      - "light.shellydimmer2_c45bbe56f9ba" # Kitchen
      - "light.living_room_big_light"

media_player:
  - platform: "group"
    name: "All Media Players"
    entities:
      - "media_player.bedroom_speaker"
      - "media_player.kitchen_speaker"
      - "media_player.living_room_speaker"
      - "media_player.office_speaker"
      - "media_player.tv"

switch:
  - platform: "wake_on_lan"
    name: "PC"
    host: "192.168.0.8"
    mac: "B4:2E:99:F0:FB:4A"
  - platform: "wake_on_lan"
    name: "XBOX"
    host: "192.168.0.13"
    mac: "94:9A:A9:19:EA:2C"
  - platform: "mqtt"
    name: "Work Alarms"
    device_class: "switch"
    state_topic: "home/work-alarms/get"
    command_topic: "home/work-alarms/set"
    retain: true
  - platform: "mqtt"
    name: "Guest Mode"
    device_class: "switch"
    state_topic: "home/guest-mode/get"
    command_topic: "home/guest-mode/set"
    retain: true
  - platform: "mqtt"
    name: "Someone Home"
    device_class: "switch"
    state_topic: "home/someone-home/get"
    command_topic: "home/someone-home/set"
    retain: true
  - platform: "mqtt"
    name: "Washing Out"
    device_class: "switch"
    state_topic: "home/washing-out/get"
    command_topic: "home/washing-out/set"
    retain: true

group:
  alldevices:
    name: "All Devices"
    entities:
      - "light.all_lights"
      - "media_player.all_media_players"
      - "group.plugs"
  plugs:
    name: "All Plugs"
    entities:
      - "switch.plug_1_socket_1"
      - "switch.plug_3_socket_1"
      - "switch.plug_4_socket_1"
      - "switch.electric_blanket"
  climate:
    name: "Climate"
    entities:
      - "sensor.living_room_heating"
      - "sensor.bedroom_heating"
      - "sensor.office_heating"
  people:
    name: "People"
    entities:
      - "person.james_eagle"
      - "person.gillian_mckinley"
